<!doctype html>
<head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">

        <title>Admin Overtech - Mediadiv Ltda</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->


         {% include "TheClickCmsAdminBundle:Layers:cssprincipal.html.twig" %}


    </head>

    <body class="dashboard-page">

        <script>
	        var theme = $.cookie('protonTheme') || 'default';
	        $('body').removeClass (function (index, css) {
	            return (css.match (/\btheme-\S+/g) || []).join(' ');
	        });
	        if (theme !== 'default') $('body').addClass(theme);
        </script>
        <!--[if lt IE 8]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->


   {% include "TheClickCmsAdminBundle:Layers:menu.html.twig" %}

        <section class="wrapper scrollable">



            <section class="title-bar">
                <div>
                    <span> Admin </span>
                    <nav class="dashboard-menu">
                        <a href="javascript:;">
                            <i class="icon-cog toggle-widget-setup"></i>
                            <i class="menu-state-icon icon-sort-up"></i>
                            <i class="menu-state-icon icon-caret-down active"></i>
                        </a>
                        <ul>

                            <li><a data-toggle="modal" href="#quickLaunchModal">Menu </a></li>
                            <li><a data-toggle="modal" href="#quickLaunchModal">Menu </a></li>
                            <li><a href="javascript:;">Third Menu Item</a></li>
                        </ul>
                    </nav>
                </div>
            </section>
            <div>
                <section class="col-md-10" style="margin-left:5%;margin-top:2%;">
				{% block agregaractualizacion %}
				<form action="{{path('guardarEditarActualizacion')}}" method="POST">
					<fieldset>
						<legend>Agregar / Actualizaciones:</legend>
					</fieldset>
					<input type="hidden" name="id" value="{{actualizacion.id}}" />
					<label for="detalle"> Detalle de la Actualizacion:</label>
					<textarea name="detalle" class="form-control">{{actualizacion.descripcion}}</textarea>
                    <label for="Idioma">Seleccione un Idioma</label>
                    <select name="idioma" class="form-control">
                    {% if actualizacion.idioma == "Español" %}
                        <option value="Español" selected>Español</option>
                        <option value="Ingles">Ingles</option>
                        <option value="Portugues">Portugues</option>
                    {% elseif actualizacion.idioma == "Ingles" %}
                        <option value="Español">Español</option>
                        <option value="Ingles" selected>Ingles</option>
                        <option value="Portugues">Portugues</option>
                    {% elseif actualizacion.idioma == "Portugues" %}                    
                        <option value="Español">Español</option>
                        <option value="Ingles">Ingles</option>
                        <option value="Portugues" selected>Portugues</option>
                    {% endif %}
                    </select>
					<label for="descripcioncorta">Descripion Corta:</label>
					<input type="text"name="descripcioncorta" value="{{actualizacion.descripcionCorta}}" class="form-control" />
					<label for="version"> Version del software </label>
					<input type="text" name="version" value="{{actualizacion.version}}" class="form-control" />
                    <br><br>
				    <input type="submit" value="Guardar &rarr;" class="btn btn-primary"/>
                    <a href="{{path('vistauploadArchivo')}}" class="btn btn-primary">Subir Actualización</a>
				</form>
                 <br><br>

                {% if actualizacion.archivos %}
                        {% set archivo = actualizacion.archivos %}
                        {% for archivo in archivo %}
                         <table class="tablaarchivo">
                             <thead>
                                 <th>Actualizacion: </th>
                             </thead>
                             <tbody>
                                 <tr id="archivo-{{archivo.id}}">
                                    <td>{{archivo.url}}
                                    <br>
                                    <br>
                                    <a id="archivo-{{archivo.id}}" class="eliminar">
                                    <button id="eliminar" class="btn btn-danger" style="margin: 10px;">Eliminar</button>
                                    </a>
                                    </td>
                                 </tr>
                             </tbody>
                         </table>   
                        <br>
                        {% endfor %}
                    {% endif %}
				{% endblock %}
                </section>
            </div>
        </section>
        <form id="formEliminarArchivo"action="{{path('eliminarArchivoActualizacion')}}"></form>   
        <div id="quickLaunchModal" tabindex="-1" role="dialog" class="modal fade">
        </div>
        <script type="text/javascript">

            jQuery(document).ready(function($) {
                jQuery("#tablaarchivo").on('click', '.eliminar', function() {
                     
                    var clickedID = this.id.split('-');
                    var DbNumberID = clickedID[1]; // toma el numero del array

                    var myData = 'recordToDelete=' + DbNumberID;

                    jQuery.ajax({
                        type: "POST",
                        url: $('#formEliminarArchivo').attr('action'),
                            
                        dataType: "text",
                        data: myData,
                        success: function(response) {
                           $('#archivo-' + DbNumberID).hide('slow');;
                        },
                        error: function(xhr, ajaxOptions, thrownError) {
                            alert(thrownError);
                        }
                    });
                });
            });
        </script>
    </body>
    {% include "TheClickCmsAdminBundle:Layers:js.html.twig" %}
        
</html>
