<!doctype html>
<head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        
        <title>Admin Overtech - Mediadiv Ltda</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

       
         {% include "TheClickCmsAdminBundle:Layers:cssprincipal.html.twig" %}

    
    </head>

    <body class="dashboard-page">
        
        <script>
	        var theme = $.cookie('protonTheme') || 'default';
	        $('body').removeClass (function (index, css) {
	            return (css.match (/\btheme-\S+/g) || []).join(' ');
	        });
	        if (theme !== 'default') $('body').addClass(theme);
        </script>
        <!--[if lt IE 8]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
   {% include "TheClickCmsAdminBundle:Layers:menu.html.twig" %}
        <section class="wrapper scrollable">
            <section class="title-bar">
                <div>
                    <span> Admin </span>
                    <nav class="dashboard-menu">
                        <a href="javascript:;">
                            <i class="icon-cog toggle-widget-setup"></i>
                            <i class="menu-state-icon icon-sort-up"></i>
                            <i class="menu-state-icon icon-caret-down active"></i>
                        </a>
                        <ul>
                            
                            <li><a data-toggle="modal" href="#quickLaunchModal">Menu </a></li>
                            <li><a data-toggle="modal" href="#quickLaunchModal">Menu </a></li>
                            <li><a href="javascript:;">Third Menu Item</a></li>
                        </ul>
                    </nav>
                </div>
            </section>
            <div>
                <section class="col-md-10" style="margin-left:5%;margin-top:2%;">
	{% block listarusuario %}
		<table class="table" id="usuario">
			<thead>
				<th>Pais</th>
				<th>Detalle</th>
				<th>Nombre</th>
				<th>Email</th>
				<th>Cargo</th>
				<th>Empresa</th>
                <th>Fecha Ingreso</th>
				<th>Editar</th>
				<th>Eliminar</th>
			</thead>
			<tbody>
				{% for usuario in usuario %}
				<tr  id="usuario-{{usuario.id}}">
					<td>{{usuario.pais}}</td>
					<td>{{usuario.detalle}}</td>
					<td>{{usuario.nombre}}</td>
					<td>{{usuario.email}}</td>
					<td>{{usuario.cargo}}</td>
					<td>{{usuario.empresa.nombre}}</td>
                    <td>{{usuario.fecha|date('y-m-d')}}</td>
					<td><a href="vistaEditarUsuario/{{usuario.id}}" class="btn btn-primary"> Editar </a></td>
                    <td> <button  id="usua-{{usuario.id}}" class="eliminar">Eliminar</button> </td>
				</tr>
				{% endfor %}
			</tbody>
		</table>

	{% endblock %}
    </section>
    <form id="formEliminarUsuario" method="post" action="{{path('eliminarUsuario')}}"></form>
    </div>
            <script type="text/javascript">
        $(document).ready(function() {
            $("#usuario").on("click", ".eliminar", function(e) {
                    e.preventDefault();
                    var clickedID = this.id.split('-');
                    var DbNumberID = clickedID[1]; // toma el numero del array
                    var myData = 'recordToDelete=' + DbNumberID;
                     
                    jQuery.ajax({
                        type: "POST",
                        url: $('#formEliminarUsuario').attr('action'),
                        dataType: "text",
                        data: myData,
                        success: function(response) {
                            $('#usuario-' + DbNumberID).hide('slow');
                        },
                        error: function(xhr, ajaxOptions, thrownError) {
                            alert(thrownError);
                        }
                });
            });
        });
        </script>
        {% include "TheClickCmsAdminBundle:Layers:js.html.twig" %}
        </section>
        <div id="quickLaunchModal" tabindex="-1" role="dialog" class="modal fade">
     </div>
    </body>
</html>









